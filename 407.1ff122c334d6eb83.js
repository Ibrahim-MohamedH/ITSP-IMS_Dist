"use strict";(self.webpackChunkITSP=self.webpackChunkITSP||[]).push([[407],{2135:(w,P,i)=>{i.d(P,{u:()=>p});var n=i(5879);let p=(()=>{class e{transform(s,u){return s?u?(u=u.toLowerCase(),s.filter(l=>{const f=l.full_name?l.full_name.toLowerCase():"",O=l.last_name?l.last_name.toLowerCase():"",g=l.title?l.title.toLowerCase():"",d=l.name?l.name.toLowerCase():"",m=l.user&&l.user.name?l.user.name.toLowerCase():"",v=l.head?l.head.toLowerCase():"",b=l.description?l.description.toLowerCase():"";return f.includes(u)||O.includes(u)||d.includes(u)||m.includes(u)||v.includes(u)||b.includes(u)||g.includes(u)})):s:[]}static#e=this.\u0275fac=function(u){return new(u||e)};static#t=this.\u0275pipe=n.Yjl({name:"filter",type:e,pure:!0,standalone:!0})}return e})()},4407:(w,P,i)=>{i.r(P),i.d(P,{default:()=>y});var n=i(6814),p=i(846),e=i(5879);let c=(()=>{class o{static#e=this.\u0275fac=function(a){return new(a||o)};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-main-packageowner"]],standalone:!0,features:[e.jDz],decls:1,vars:0,template:function(a,r){1&a&&e._UZ(0,"router-outlet")},dependencies:[n.ez,p.lC]})}return o})();var s=i(6223),u=i(8733),l=i(4286),f=i(9862),O=i(553);let g=(()=>{class o{constructor(t){this.http=t,this.packageOwnerUrl=`${O.N.url}user/packages`}getPackageOwnersList(t){let a=new f.LE;return t&&Object.keys(t).forEach(r=>{a=a.append(r,t[r])}),this.http.get(this.packageOwnerUrl,{params:a})}getPackageOwnerById(t){return this.http.get(`${this.packageOwnerUrl}/${t}`)}updatePackageOwner(t,a,r){let _=new f.LE;r&&Object.keys(r).forEach(k=>{_=_.append(k,r[k])});const h=new FormData;return Object.keys(a).forEach(k=>{const x=a[k];h.append(k,null!=x?x.toString():"")}),this.http.post(`${this.packageOwnerUrl}/${t}`,h,{params:_})}deletePackageOwner(t){return this.http.delete(`${this.packageOwnerUrl}/${t}`)}static#e=this.\u0275fac=function(a){return new(a||o)(e.LFG(f.eN))};static#t=this.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();var d=i(7349);function m(o,C){if(1&o&&(e.TgZ(0,"option",14),e._uU(1),e.qZA()),2&o){const t=C.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.name," ")}}function v(o,C){if(1&o&&(e.ynx(0),e.TgZ(1,"div",15)(2,"button",16),e._uU(3," \u0625\u0636\u0627\u0641\u0629 \u062d\u0632\u0645\u0629 \u0644\u0644\u0645\u0633\u062a\u062e\u062f\u0645 "),e.qZA()(),e.BQk()),2&o){const t=e.oxw();e.xp6(2),e.Q6J("disabled",!t.packageOwnerForm.valid)}}function b(o,C){if(1&o){const t=e.EpF();e.TgZ(0,"div",15)(1,"button",17),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.updatePackageOwner())}),e._uU(2," \u062a\u0639\u062f\u064a\u0644 "),e.qZA()()}if(2&o){const t=e.oxw();e.xp6(1),e.Q6J("disabled",!t.packageOwnerForm.valid)}}let M=(()=>{class o{constructor(t,a,r,_,h,k){this.localize=t,this.router=a,this.activatedRoute=r,this._MessagesService=_,this.ownerService=h,this.packageService=k,this.isEditMode=!1,this.packageOwner=[],this.packages=[],this.packageOwnerId="",this.packageOwnerForm=new s.cw({username:new s.NI(""),package_id:new s.NI("",s.kI.required)})}ngOnInit(){this.getPackageList(),this.activatedRoute.paramMap.subscribe(t=>{const a=t.get("id");a&&(this.packageOwnerId=a,this.isEditMode=!0,this.ownerService.getPackageOwnerById(a).subscribe(r=>{r&&r.data&&(this.setFormValues(r.data),this.packageOwner=r.data)}))})}getPackageList(){this.packageService.packagesList().subscribe({next:t=>{this.packages=t.data},error:t=>{console.error("Error in packages list",t)}})}navigateToPackageOwnersList(){const t=this.localize.translateRoute("/dashboard/packageOwners");this.router.navigate([t])}setFormValues(t){this.packageOwnerForm.controls.username.setValue(t.user.name),this.packageOwnerForm.controls.package_id.setValue(t.package.id),console.log(t)}updatePackageOwner(){this.packageOwnerForm.valid&&this.ownerService.updatePackageOwner(this.packageOwnerId,{package_id:this.packageOwnerForm.controls.package_id.value||"",_method:"PATCH"}).subscribe({next:a=>{this.navigateToPackageOwnersList(),this._MessagesService.showSuccessMessage("\u062a\u0645 \u0627\u0644\u062a\u0639\u062f\u064a\u0644",3e3)},error:a=>{console.error("Failed to update package:",a)}})}static#e=this.\u0275fac=function(a){return new(a||o)(e.Y36(u.An),e.Y36(p.F0),e.Y36(p.gz),e.Y36(l.K),e.Y36(g),e.Y36(d.M))};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-add-packageowner"]],standalone:!0,features:[e.jDz],decls:19,vars:4,consts:[[1,"container-fluid"],[1,"row"],[1,"col-12","tabs","px-0"],["id","pills-tabContent",1,"tab-content","p-3"],["id","addPackage","role","tabpanel","aria-labelledby","addPackage-tab","tabindex","0",1,""],[3,"formGroup"],[1,"form-group","col-md-6","mb-3"],["for","username",1,"form-label"],["type","text","formControlName","username","readonly","","id","name",1,"form-control"],["for","package_id",1,"form-label"],["name","package_id","id","package_id","formControlName","package_id",1,"form-select"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf","ngIfElse"],["editButton",""],[3,"value"],[1,"form-group","col-12","mb-3"],["type","submit",1,"btn","px-5",3,"disabled"],["type","button",1,"btn","px-5",3,"disabled","click"]],template:function(a,r){if(1&a&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"form",5)(6,"div",1)(7,"div",6)(8,"label",7),e._uU(9,"\u0627\u0633\u0645 \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645"),e.qZA(),e._UZ(10,"input",8),e.qZA(),e.TgZ(11,"div",6)(12,"label",9),e._uU(13,"\u0627\u0644\u062d\u0632\u0645\u0629*"),e.qZA(),e.TgZ(14,"select",10),e.YNc(15,m,2,2,"option",11),e.qZA()()(),e.YNc(16,v,4,1,"ng-container",12),e.YNc(17,b,3,1,"ng-template",null,13,e.W1O),e.qZA()()()()()()),2&a){const _=e.MAs(18);e.xp6(5),e.Q6J("formGroup",r.packageOwnerForm),e.xp6(10),e.Q6J("ngForOf",r.packages),e.xp6(1),e.Q6J("ngIf",!r.isEditMode)("ngIfElse",_)}},dependencies:[n.ez,n.sg,n.O5,s.UX,s._Y,s.YN,s.Kr,s.Fj,s.EJ,s.JJ,s.JL,s.sg,s.u],styles:[".tab-content[_ngcontent-%COMP%]{border-radius:4px}form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:var(--dashboard1)}form[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus, form[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus-visible, form[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus, form[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus-visible{box-shadow:none;outline:none}form[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{border-color:var(--main);color:#115a8b}form[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]::placeholder{color:#115a8b86}form[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{border-color:var(--main);color:var(--dashboard1);background-image:url(chevron-Down.243768823842f8ab.svg);background-size:30px 100%;background-position:left 0px}form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:var(--main);color:#fff}form[_ngcontent-%COMP%]   .input-group-vertical[_ngcontent-%COMP%]   input[type=file][_ngcontent-%COMP%] + .input-group-text[_ngcontent-%COMP%]{color:var(--dashboard1);background-color:transparent;border:none}form[_ngcontent-%COMP%]   input[type=file][_ngcontent-%COMP%] + label[_ngcontent-%COMP%]:not(.d-inline-block){border:1px solid var(--main);color:var(--dashboard1);width:100%;border-radius:10px}"]})}return o})();var A=i(1818),Z=i(2135),F=i(8034),E=i(7700);const L=function(o,C){return[o,C]};function U(o,C){if(1&o){const t=e.EpF();e.TgZ(0,"div",13)(1,"div",14)(2,"div",15)(3,"div",16)(4,"div",17)(5,"a",18)(6,"h4",19),e._uU(7," \u0627\u0633\u0645 \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645: "),e.TgZ(8,"span",20),e._uU(9),e.qZA()(),e.TgZ(10,"h5",19),e._uU(11," \u0627\u0644\u0628\u0631\u064a\u062f \u0627\u0644\u0623\u0644\u0643\u062a\u0631\u0648\u0646\u064a: "),e.TgZ(12,"span",20),e._uU(13),e.qZA()(),e.TgZ(14,"p",21),e._uU(15," \u0627\u0633\u0645 \u0627\u0644\u062d\u0632\u0645\u0629: "),e.TgZ(16,"span",20),e._uU(17),e.qZA()()()(),e.TgZ(18,"div",22)(19,"a",23),e.ALo(20,"localize"),e._uU(21,"\u062a\u0639\u062f\u064a\u0644 "),e._UZ(22,"i",24),e.qZA(),e.TgZ(23,"button",25),e.NdJ("click",function(){const _=e.CHM(t).$implicit,h=e.oxw();return e.KtG(h.deletePackageOwner(_.id,_.user.name))}),e._uU(24," \u062d\u0630\u0641 "),e._UZ(25,"i",26),e.qZA()()()()()()}if(2&o){const t=C.$implicit;e.xp6(9),e.Oqu(t.user.name),e.xp6(4),e.Oqu(t.user.email),e.xp6(4),e.Oqu(t.package.name),e.xp6(2),e.Q6J("routerLink",e.WLB(6,L,e.lcZ(20,4,"/dashboard/packageOwners/add-packageOwner"),t.id))}}function D(o,C){1&o&&(e.TgZ(0,"div",27)(1,"p"),e._uU(2,"\u0644\u0627 \u064a\u0648\u062c\u062f \u0628\u064a\u0627\u0646\u0627\u062a"),e.qZA()())}let T=(()=>{class o{constructor(t,a){this.dialog=t,this.ownerServices=a,this.packageOwners=[],this.searchQuery="",this.loading=!1}ngOnInit(){this.getPackageOwnerList()}getPackageOwnerList(t=1){this.loading=!0,this.ownerServices.getPackageOwnersList({page:t}).subscribe({next:a=>{this.loading=!1,console.log(a.data),this.packageOwners=a.data,this.currentPage=a.pagination.current_page,this.totalPages=a.pagination.last_page},error:a=>{this.loading=!1,console.error("Error in packages list",a)}})}deletePackageOwner(t,a){this.dialog.open(F.$,{width:"500px",data:{title:"\u062a\u0627\u0643\u064a\u062f \u0627\u0644\u062d\u0630\u0641",message:`\u061f ${a} \u0647\u0644 \u062a\u0631\u064a\u062f \u062d\u0630\u0641  `}}).afterClosed().subscribe(_=>{_&&this.ownerServices.deletePackageOwner(t).subscribe({next:h=>{this.getPackageOwnerList()},error:h=>{console.error("There was an error deleting the package!",h)}})})}onPageChange(t){this.getPackageOwnerList(t)}static#e=this.\u0275fac=function(a){return new(a||o)(e.Y36(E.uw),e.Y36(g))};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-packageowners-list"]],standalone:!0,features:[e.jDz],decls:16,vars:11,consts:[[1,"container-fluid"],[1,"row"],[1,"col-12","tabs","px-0"],[1,"mb-4","filterForm"],[1,"col-xl-4","col-md-6","mb-lg-2","mb-2"],[1,"input-group"],[1,"btn"],[1,"fa-solid","fa-magnifying-glass"],["type","search","name","search","id","search",1,"form-control",3,"ngModel","ngModelChange"],[1,"row","mx-0"],["class","col-md-6 mb-1",4,"ngFor","ngForOf"],["class","text-center",4,"ngIf"],[3,"currentPage","totalPages","pageChange"],[1,"col-md-6","mb-1"],[1,"card","mb-3","border-0"],[1,"card-body"],[1,"row","mb-2"],[1,"col-12","mb-3"],[1,"text-reset","text-decoration-none"],[1,"card-title"],[1,"info"],[1,"card-text","fs-5","fw-semibold"],[1,"col-12","text-end"],[1,"btn","mx-1","edit",3,"routerLink"],[1,"fa-regular","fa-pen-to-square"],[1,"btn","delete",3,"click"],[1,"fa-regular","fa-trash-can"],[1,"text-center"]],template:function(a,r){1&a&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"form",3)(4,"div",1)(5,"div",4)(6,"div",5)(7,"button",6),e._UZ(8,"i",7),e.qZA(),e.TgZ(9,"input",8),e.NdJ("ngModelChange",function(h){return r.searchQuery=h}),e.qZA()()()()(),e.TgZ(10,"div",9),e.YNc(11,U,26,9,"div",10),e.ALo(12,"filter"),e.YNc(13,D,3,0,"div",11),e.ALo(14,"filter"),e.qZA(),e.TgZ(15,"pagination",12),e.NdJ("pageChange",function(h){return r.onPageChange(h)}),e.qZA()()()()),2&a&&(e.xp6(9),e.Q6J("ngModel",r.searchQuery),e.xp6(2),e.Q6J("ngForOf",e.xi3(12,5,r.packageOwners,r.searchQuery)),e.xp6(2),e.Q6J("ngIf",0===e.xi3(14,8,r.packageOwners,r.searchQuery).length&&!r.loading),e.xp6(2),e.Q6J("currentPage",r.currentPage)("totalPages",r.totalPages))},dependencies:[n.ez,n.sg,n.O5,s.u5,s._Y,s.Fj,s.JJ,s.JL,s.On,s.F,A.Q,Z.u,p.rH,u.fQ,u.lO],styles:[".card[_ngcontent-%COMP%]{box-shadow:0 3px 6px #0000001a}a.edit[_ngcontent-%COMP%]{background-color:var(--stroke-color2);color:var(--main)}span.info[_ngcontent-%COMP%]{color:var(--dashboard2)}button.delete[_ngcontent-%COMP%]{background-color:var(--danger);color:#fff}.filterForm[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]{border:1px solid var(--dashboard2);border-radius:8px}.filterForm[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:var(--main)}.filterForm[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus, .filterForm[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus-visible, .filterForm[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus, .filterForm[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus-visible{box-shadow:none;outline:none}.filterForm[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{color:var(--main)}.filterForm[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]::placeholder{color:#115a8b86}.filterForm[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{border-color:var(--dashboard2);color:var(--dashboard1);background-image:url(chevron-Down.243768823842f8ab.svg);background-size:30px 100%;background-position:left 0px}"]})}return o})();const y=[{path:"",component:c,children:[{path:"",component:T},{path:":slug",component:T},{path:"add-packageOwner/:id",component:M,data:{breadcrumbs:[{label:"\u062a\u0639\u062f\u064a\u0644 \u0628\u064a\u0627\u0646\u0627\u062a \u0645\u0627\u0644\u0643 \u0627\u0644\u062d\u0632\u0645\u0629",url:"/dashboard/packageOwners/add-packageOwner"}]}},{path:"view-packageOwner/:id",component:M,data:{breadcrumbs:[{label:"\u0628\u064a\u0627\u0646\u0627\u062a \u0645\u0627\u0644\u0643 \u0627\u0644\u062d\u0632\u0645\u0629",url:"/dashboard/packageOwners/view-packageOwner"}]}}]}]},8034:(w,P,i)=>{i.d(P,{$:()=>u});var n=i(6814),p=i(7700),e=i(2296),c=i(5879),s=i(4286);let u=(()=>{class l{constructor(O,g,d){this.dialogRef=O,this.data=g,this._MessagesService=d}onConfirmClick(){this.dialogRef.close(!0),this._MessagesService.showSuccessMessage("Done",3e3)}onCancelClick(){this.dialogRef.close(!1)}static#e=this.\u0275fac=function(g){return new(g||l)(c.Y36(p.so),c.Y36(p.WI),c.Y36(s.K))};static#t=this.\u0275cmp=c.Xpm({type:l,selectors:[["app-confirm-dialog"]],standalone:!0,features:[c.jDz],decls:10,vars:2,consts:[[1,"text-center"],["mat-dialog-title","",1,"text-center"],[1,"m-auto"],["mat-button","",3,"click"],["mat-button","","olor","primary",2,"color","red",3,"click"]],template:function(g,d){1&g&&(c.TgZ(0,"div",0)(1,"h2",1),c._uU(2),c.qZA(),c.TgZ(3,"mat-dialog-content"),c._uU(4),c.qZA(),c.TgZ(5,"mat-dialog-actions",2)(6,"button",3),c.NdJ("click",function(){return d.onCancelClick()}),c._uU(7,"\u0627\u0644\u063a\u0627\u0621"),c.qZA(),c.TgZ(8,"button",4),c.NdJ("click",function(){return d.onConfirmClick()}),c._uU(9," \u062a\u0627\u0643\u064a\u062f "),c.qZA()()()),2&g&&(c.xp6(2),c.Oqu(d.data.title),c.xp6(2),c.Oqu(d.data.message))},dependencies:[n.ez,p.Is,p.uh,p.xY,p.H8,e.ot,e.lW],styles:["mat-dialog-content[_ngcontent-%COMP%]{font-size:16px;margin-bottom:20px}mat-dialog-actions[_ngcontent-%COMP%]{display:flex;justify-content:center}mat-dialog-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:10px}"]})}return l})()},1818:(w,P,i)=>{i.d(P,{Q:()=>l});var n=i(5879),p=i(6223),e=i(6814);function c(f,O){if(1&f){const g=n.EpF();n.TgZ(0,"li",2)(1,"a",7),n.NdJ("click",function(){const v=n.CHM(g).index,b=n.oxw();return n.KtG(b.navigateTo(v+1))}),n._uU(2),n.qZA()()}if(2&f){const g=O.index,d=n.oxw();n.ekj("active",d.currentPage===g+1),n.xp6(2),n.Oqu(g+1)}}const s=function(){return[]},u={provide:p.JU,useExisting:(0,n.Gpc)(()=>l),multi:!0};let l=(()=>{class f{constructor(){this.pageChange=new n.vpe}navigateTo(g){this.pageChange.emit(g),this.scrollToTop()}ngOnInit(){}scrollToTop(){window.scroll({top:0,left:0,behavior:"smooth"})}static#e=this.\u0275fac=function(d){return new(d||f)};static#t=this.\u0275cmp=n.Xpm({type:f,selectors:[["pagination"]],inputs:{currentPage:"currentPage",totalPages:"totalPages"},outputs:{pageChange:"pageChange"},standalone:!0,features:[n._Bn([u]),n.jDz],decls:11,vars:6,consts:[["aria-label","Page navigation"],[1,"pagination","justify-content-center"],[1,"page-item","mx-2"],["aria-label","Previous",1,"page-link",3,"click"],["aria-hidden","true"],["class","page-item mx-2",3,"active",4,"ngFor","ngForOf"],["aria-label","Next",1,"page-link",3,"click"],[1,"page-link",3,"click"]],template:function(d,m){1&d&&(n.TgZ(0,"nav",0)(1,"ul",1)(2,"li",2)(3,"a",3),n.NdJ("click",function(){return m.navigateTo(m.currentPage-1)}),n.TgZ(4,"span",4),n._uU(5,"\xab"),n.qZA()()(),n.YNc(6,c,3,3,"li",5),n.TgZ(7,"li",2)(8,"a",6),n.NdJ("click",function(){return m.navigateTo(m.currentPage+1)}),n.TgZ(9,"span",4),n._uU(10,"\xbb"),n.qZA()()()()()),2&d&&(n.xp6(2),n.ekj("disabled",1===m.currentPage),n.xp6(4),n.Q6J("ngForOf",n.DdM(5,s).constructor(m.totalPages)),n.xp6(1),n.ekj("disabled",m.currentPage===m.totalPages))},dependencies:[e.ez,e.sg],styles:[".pagination[_ngcontent-%COMP%]   .page-item[_ngcontent-%COMP%]{cursor:pointer}"]})}return f})()}}]);