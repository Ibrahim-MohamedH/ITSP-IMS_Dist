"use strict";(self.webpackChunkITSP=self.webpackChunkITSP||[]).push([[921],{2135:(M,P,i)=>{i.d(P,{u:()=>p});var t=i(5879);let p=(()=>{class e{transform(o,u){return o?u?(u=u.toLowerCase(),o.filter(c=>{const _=c.full_name?c.full_name.toLowerCase():"",C=c.last_name?c.last_name.toLowerCase():"",g=c.title?c.title.toLowerCase():"",d=c.name?c.name.toLowerCase():"",m=c.user&&c.user.name?c.user.name.toLowerCase():"",v=c.head?c.head.toLowerCase():"",k=c.description?c.description.toLowerCase():"";return _.includes(u)||C.includes(u)||d.includes(u)||m.includes(u)||v.includes(u)||k.includes(u)||g.includes(u)})):o:[]}static#e=this.\u0275fac=function(u){return new(u||e)};static#t=this.\u0275pipe=t.Yjl({name:"filter",type:e,pure:!0,standalone:!0})}return e})()},2921:(M,P,i)=>{i.r(P),i.d(P,{default:()=>Z});var t=i(6814),p=i(846),e=i(5879);let s=(()=>{class r{static#e=this.\u0275fac=function(a){return new(a||r)};static#t=this.\u0275cmp=e.Xpm({type:r,selectors:[["app-main-package"]],standalone:!0,features:[e.jDz],decls:1,vars:0,template:function(a,l){1&a&&e._UZ(0,"router-outlet")},dependencies:[t.ez,p.lC]})}return r})();var o=i(6223),u=i(8733),c=i(4286),_=i(7349);function C(r,b){if(1&r&&(e.ynx(0),e.TgZ(1,"div",11)(2,"button",16),e._uU(3," \u0625\u0636\u0627\u0641\u0629 \u062d\u0632\u0645\u0629 "),e.qZA()(),e.BQk()),2&r){const n=e.oxw();e.xp6(2),e.Q6J("disabled",!n.packageForm.valid)}}function g(r,b){if(1&r){const n=e.EpF();e.TgZ(0,"div",11)(1,"button",17),e.NdJ("click",function(){e.CHM(n);const l=e.oxw();return e.KtG(l.updatePackage())}),e._uU(2," \u062a\u0639\u062f\u064a\u0644 "),e.qZA()()}if(2&r){const n=e.oxw();e.xp6(1),e.Q6J("disabled",!n.packageForm.valid)}}let d=(()=>{class r{constructor(n,a,l,f,h){this.localize=n,this.router=a,this.activatedRoute=l,this._MessagesService=f,this.packagesService=h,this.isEditMode=!1,this.packageId="",this.packageForm=new o.cw({name:new o.NI("",o.kI.required),amount:new o.NI(0,o.kI.required),details:new o.NI("",o.kI.required)})}ngOnInit(){this.activatedRoute.paramMap.subscribe(n=>{const a=n.get("id");a&&(this.packageId=a,this.isEditMode=!0,this.packagesService.getPackageById(a).subscribe(l=>{l&&l.data&&this.setFormValues(l.data)}))})}navigateToPackagesList(){const n=this.localize.translateRoute("/dashboard/packages");this.router.navigate([n])}setFormValues(n){this.packageForm.controls.name.setValue(n.name),this.packageForm.controls.amount.setValue(n.amount),this.packageForm.controls.details.setValue(n.details)}updatePackage(){this.packageForm.valid&&this.packagesService.updatePackage(this.packageId,{name:this.packageForm.controls.name.value||"",amount:this.packageForm.controls.amount.value||0,details:this.packageForm.controls.details.value||"",_method:"PATCH"}).subscribe({next:a=>{this.navigateToPackagesList(),this._MessagesService.showSuccessMessage("\u062a\u0645 \u0627\u0644\u0625\u0636\u0627\u0641\u0629",3e3)},error:a=>{console.error("Failed to update package:",a)}})}onSubmit(){this.packageForm.valid&&this.packagesService.addPackage({name:this.packageForm.controls.name.value||"",amount:this.packageForm.controls.amount.value||0,details:this.packageForm.controls.details.value||""}).subscribe({next:a=>{this.navigateToPackagesList(),this._MessagesService.showSuccessMessage("\u062a\u0645 \u0627\u0644\u0625\u0636\u0627\u0641\u0629",3e3)},error:a=>{console.error("Failed to add package:",a)}})}static#e=this.\u0275fac=function(a){return new(a||r)(e.Y36(u.An),e.Y36(p.F0),e.Y36(p.gz),e.Y36(c.K),e.Y36(_.M))};static#t=this.\u0275cmp=e.Xpm({type:r,selectors:[["app-add-package"]],standalone:!0,features:[e.jDz],decls:22,vars:3,consts:[[1,"container-fluid"],[1,"row"],[1,"col-12","tabs","px-0"],["id","pills-tabContent",1,"tab-content","p-3"],["id","addPackage","role","tabpanel","aria-labelledby","addPackage-tab","tabindex","0",1,""],[3,"formGroup","ngSubmit"],[1,"form-group","col-md-6","mb-3"],["for","name",1,"form-label"],["type","text","name","name","id","name","formControlName","name",1,"form-control"],["for","amount",1,"form-label"],["type","number","name","amount","id","amount","formControlName","amount",1,"form-control"],[1,"form-group","col-12","mb-3"],["for","details",1,"form-label"],["name","details","id","details","cols","30","rows","10","formControlName","details",1,"form-control"],[4,"ngIf","ngIfElse"],["editButton",""],["type","submit",1,"btn","px-5",3,"disabled"],["type","button",1,"btn","px-5",3,"disabled","click"]],template:function(a,l){if(1&a&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"form",5),e.NdJ("ngSubmit",function(){return l.onSubmit()}),e.TgZ(6,"div",1)(7,"div",6)(8,"label",7),e._uU(9,"\u0627\u0633\u0645 \u0627\u0644\u062d\u0632\u0645\u0629*"),e.qZA(),e._UZ(10,"input",8),e.qZA(),e.TgZ(11,"div",6)(12,"label",9),e._uU(13,"\u0627\u0644\u0633\u0639\u0631*"),e.qZA(),e._UZ(14,"input",10),e.qZA(),e.TgZ(15,"div",11)(16,"label",12),e._uU(17,"\u0627\u0644\u0648\u0635\u0641"),e.qZA(),e._UZ(18,"textarea",13),e.qZA()(),e.YNc(19,C,4,1,"ng-container",14),e.YNc(20,g,3,1,"ng-template",null,15,e.W1O),e.qZA()()()()()()),2&a){const f=e.MAs(21);e.xp6(5),e.Q6J("formGroup",l.packageForm),e.xp6(14),e.Q6J("ngIf",!l.isEditMode)("ngIfElse",f)}},dependencies:[t.ez,t.O5,o.UX,o._Y,o.Fj,o.wV,o.JJ,o.JL,o.sg,o.u],styles:[".tab-content[_ngcontent-%COMP%]{border-radius:4px}form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:var(--dashboard1)}form[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus, form[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus-visible, form[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus, form[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus-visible{box-shadow:none;outline:none}form[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{border-color:var(--main);color:#115a8b}form[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]::placeholder{color:#115a8b86}form[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{border-color:var(--main);color:var(--dashboard1);background-image:url(chevron-Down.243768823842f8ab.svg);background-size:30px 100%;background-position:left 0px}form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:var(--main);color:#fff}form[_ngcontent-%COMP%]   .input-group-vertical[_ngcontent-%COMP%]   input[type=file][_ngcontent-%COMP%] + .input-group-text[_ngcontent-%COMP%]{color:var(--dashboard1);background-color:transparent;border:none}form[_ngcontent-%COMP%]   input[type=file][_ngcontent-%COMP%] + label[_ngcontent-%COMP%]:not(.d-inline-block){border:1px solid var(--main);color:var(--dashboard1);width:100%;border-radius:10px}"]})}return r})();var m=i(8034),v=i(2135),k=i(1818),O=i(7700);const T=function(r,b){return[r,b]};function x(r,b){if(1&r){const n=e.EpF();e.TgZ(0,"div",13)(1,"div",14)(2,"div",15)(3,"div",16)(4,"div",17)(5,"a",18)(6,"h4",19),e._uU(7," \u0627\u0633\u0645 \u0627\u0644\u062d\u0632\u0645\u0629: "),e.TgZ(8,"span",20),e._uU(9),e.qZA()(),e.TgZ(10,"h5",19),e._uU(11," \u0627\u0644\u0633\u0639\u0631: "),e.TgZ(12,"span",20),e._uU(13),e.qZA()(),e.TgZ(14,"p",21),e._uU(15," \u062a\u0641\u0627\u0635\u064a\u0644 \u0627\u0644\u062d\u0632\u0645\u0629: "),e._UZ(16,"br"),e.TgZ(17,"span",20),e._uU(18),e.qZA()()()(),e.TgZ(19,"div",22)(20,"a",23),e.ALo(21,"localize"),e._uU(22,"\u062a\u0639\u062f\u064a\u0644 "),e._UZ(23,"i",24),e.qZA(),e.TgZ(24,"button",25),e.NdJ("click",function(){const f=e.CHM(n).$implicit,h=e.oxw();return e.KtG(h.deletePackage(f.id,f.name))}),e._uU(25," \u062d\u0630\u0641 "),e._UZ(26,"i",26),e.qZA()()()()()()}if(2&r){const n=b.$implicit;e.xp6(9),e.Oqu(n.name),e.xp6(4),e.hij(" ",n.amount," "),e.xp6(5),e.hij(" ",n.details,""),e.xp6(2),e.Q6J("routerLink",e.WLB(6,T,e.lcZ(21,4,"/dashboard/packages/add-package"),n.id))}}function A(r,b){1&r&&(e.TgZ(0,"div",27)(1,"p"),e._uU(2,"\u0644\u0627 \u064a\u0648\u062c\u062f \u0628\u064a\u0627\u0646\u0627\u062a"),e.qZA()())}const Z=[{path:"",component:s,children:[{path:"",component:(()=>{class r{constructor(n,a){this.packageService=n,this.dialog=a,this.packages=[],this.searchQuery="",this.loading=!1}ngOnInit(){this.getPackageList()}getPackageList(n=1){this.loading=!0,this.packageService.packagesList({page:n}).subscribe({next:a=>{this.loading=!1,this.packages=a.data,this.currentPage=a.pagination.current_page,this.totalPages=a.pagination.last_page},error:a=>{this.loading=!1,console.error("Error in packages list",a)}})}deletePackage(n,a){this.dialog.open(m.$,{width:"500px",data:{title:"\u062a\u0627\u0643\u064a\u062f \u0627\u0644\u062d\u0630\u0641",message:`\u061f ${a} \u0647\u0644 \u062a\u0631\u064a\u062f \u062d\u0630\u0641  `}}).afterClosed().subscribe(f=>{f&&this.packageService.deletePackage(n).subscribe({next:h=>{this.getPackageList()},error:h=>{console.error("There was an error deleting the package!",h)}})})}onPageChange(n){this.getPackageList(n)}static#e=this.\u0275fac=function(a){return new(a||r)(e.Y36(_.M),e.Y36(O.uw))};static#t=this.\u0275cmp=e.Xpm({type:r,selectors:[["app-packages-list"]],standalone:!0,features:[e.jDz],decls:16,vars:11,consts:[[1,"container-fluid"],[1,"row"],[1,"col-12","tabs","px-0"],[1,"mb-4","filterForm"],[1,"col-xl-4","col-md-6","mb-lg-2","mb-2"],[1,"input-group"],[1,"btn"],[1,"fa-solid","fa-magnifying-glass"],["type","search","name","search","id","search",1,"form-control",3,"ngModel","ngModelChange"],[1,"row","mx-0"],["class","col-md-6 mb-1",4,"ngFor","ngForOf"],["class","text-center",4,"ngIf"],[3,"currentPage","totalPages","pageChange"],[1,"col-md-6","mb-1"],[1,"card","mb-3","border-0"],[1,"card-body"],[1,"row","mb-2"],[1,"col-12","mb-3"],[1,"text-reset","text-decoration-none"],[1,"card-title"],[1,"info"],[1,"card-text","fs-5"],[1,"col-12","text-end"],[1,"btn","mx-1","edit",3,"routerLink"],[1,"fa-regular","fa-pen-to-square"],[1,"btn","delete",3,"click"],[1,"fa-regular","fa-trash-can"],[1,"text-center"]],template:function(a,l){1&a&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"form",3)(4,"div",1)(5,"div",4)(6,"div",5)(7,"button",6),e._UZ(8,"i",7),e.qZA(),e.TgZ(9,"input",8),e.NdJ("ngModelChange",function(h){return l.searchQuery=h}),e.qZA()()()()(),e.TgZ(10,"div",9),e.YNc(11,x,27,9,"div",10),e.ALo(12,"filter"),e.YNc(13,A,3,0,"div",11),e.ALo(14,"filter"),e.qZA(),e.TgZ(15,"pagination",12),e.NdJ("pageChange",function(h){return l.onPageChange(h)}),e.qZA()()()()),2&a&&(e.xp6(9),e.Q6J("ngModel",l.searchQuery),e.xp6(2),e.Q6J("ngForOf",e.xi3(12,5,l.packages,l.searchQuery)),e.xp6(2),e.Q6J("ngIf",0===e.xi3(14,8,l.packages,l.searchQuery).length&&!l.loading),e.xp6(2),e.Q6J("currentPage",l.currentPage)("totalPages",l.totalPages))},dependencies:[t.ez,t.sg,t.O5,o.u5,o._Y,o.Fj,o.JJ,o.JL,o.On,o.F,k.Q,v.u,p.rH,u.fQ,u.lO],styles:[".card[_ngcontent-%COMP%]{box-shadow:0 3px 6px #0000001a}a.edit[_ngcontent-%COMP%]{background-color:var(--stroke-color2);color:var(--main)}span.info[_ngcontent-%COMP%]{color:var(--dashboard2)}button.delete[_ngcontent-%COMP%]{background-color:var(--danger);color:#fff}.filterForm[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]{border:1px solid var(--dashboard2);border-radius:8px}.filterForm[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:var(--main)}.filterForm[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus, .filterForm[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus-visible, .filterForm[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus, .filterForm[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus-visible{box-shadow:none;outline:none}.filterForm[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{color:var(--main)}.filterForm[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]::placeholder{color:#115a8b86}.filterForm[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{border-color:var(--dashboard2);color:var(--dashboard1);background-image:url(chevron-Down.243768823842f8ab.svg);background-size:30px 100%;background-position:left 0px}"]})}return r})()},{path:"add-package",component:d,data:{breadcrumbs:[{label:"\u0625\u0636\u0627\u0641\u0629 \u062d\u0632\u0645\u0629",url:"/dashboard/packages/add-package"}]}},{path:"add-package/:id",component:d,data:{breadcrumbs:[{label:"\u062a\u0639\u062f\u064a\u0644 \u062d\u0632\u0645\u0629",url:"/dashboard/packages/add-pakcage"}]}}]}]},8034:(M,P,i)=>{i.d(P,{$:()=>u});var t=i(6814),p=i(7700),e=i(2296),s=i(5879),o=i(4286);let u=(()=>{class c{constructor(C,g,d){this.dialogRef=C,this.data=g,this._MessagesService=d}onConfirmClick(){this.dialogRef.close(!0),this._MessagesService.showSuccessMessage("Done",3e3)}onCancelClick(){this.dialogRef.close(!1)}static#e=this.\u0275fac=function(g){return new(g||c)(s.Y36(p.so),s.Y36(p.WI),s.Y36(o.K))};static#t=this.\u0275cmp=s.Xpm({type:c,selectors:[["app-confirm-dialog"]],standalone:!0,features:[s.jDz],decls:10,vars:2,consts:[[1,"text-center"],["mat-dialog-title","",1,"text-center"],[1,"m-auto"],["mat-button","",3,"click"],["mat-button","","olor","primary",2,"color","red",3,"click"]],template:function(g,d){1&g&&(s.TgZ(0,"div",0)(1,"h2",1),s._uU(2),s.qZA(),s.TgZ(3,"mat-dialog-content"),s._uU(4),s.qZA(),s.TgZ(5,"mat-dialog-actions",2)(6,"button",3),s.NdJ("click",function(){return d.onCancelClick()}),s._uU(7,"\u0627\u0644\u063a\u0627\u0621"),s.qZA(),s.TgZ(8,"button",4),s.NdJ("click",function(){return d.onConfirmClick()}),s._uU(9," \u062a\u0627\u0643\u064a\u062f "),s.qZA()()()),2&g&&(s.xp6(2),s.Oqu(d.data.title),s.xp6(2),s.Oqu(d.data.message))},dependencies:[t.ez,p.Is,p.uh,p.xY,p.H8,e.ot,e.lW],styles:["mat-dialog-content[_ngcontent-%COMP%]{font-size:16px;margin-bottom:20px}mat-dialog-actions[_ngcontent-%COMP%]{display:flex;justify-content:center}mat-dialog-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:10px}"]})}return c})()},1818:(M,P,i)=>{i.d(P,{Q:()=>c});var t=i(5879),p=i(6223),e=i(6814);function s(_,C){if(1&_){const g=t.EpF();t.TgZ(0,"li",2)(1,"a",7),t.NdJ("click",function(){const v=t.CHM(g).index,k=t.oxw();return t.KtG(k.navigateTo(v+1))}),t._uU(2),t.qZA()()}if(2&_){const g=C.index,d=t.oxw();t.ekj("active",d.currentPage===g+1),t.xp6(2),t.Oqu(g+1)}}const o=function(){return[]},u={provide:p.JU,useExisting:(0,t.Gpc)(()=>c),multi:!0};let c=(()=>{class _{constructor(){this.pageChange=new t.vpe}navigateTo(g){this.pageChange.emit(g),this.scrollToTop()}ngOnInit(){}scrollToTop(){window.scroll({top:0,left:0,behavior:"smooth"})}static#e=this.\u0275fac=function(d){return new(d||_)};static#t=this.\u0275cmp=t.Xpm({type:_,selectors:[["pagination"]],inputs:{currentPage:"currentPage",totalPages:"totalPages"},outputs:{pageChange:"pageChange"},standalone:!0,features:[t._Bn([u]),t.jDz],decls:11,vars:6,consts:[["aria-label","Page navigation"],[1,"pagination","justify-content-center"],[1,"page-item","mx-2"],["aria-label","Previous",1,"page-link",3,"click"],["aria-hidden","true"],["class","page-item mx-2",3,"active",4,"ngFor","ngForOf"],["aria-label","Next",1,"page-link",3,"click"],[1,"page-link",3,"click"]],template:function(d,m){1&d&&(t.TgZ(0,"nav",0)(1,"ul",1)(2,"li",2)(3,"a",3),t.NdJ("click",function(){return m.navigateTo(m.currentPage-1)}),t.TgZ(4,"span",4),t._uU(5,"\xab"),t.qZA()()(),t.YNc(6,s,3,3,"li",5),t.TgZ(7,"li",2)(8,"a",6),t.NdJ("click",function(){return m.navigateTo(m.currentPage+1)}),t.TgZ(9,"span",4),t._uU(10,"\xbb"),t.qZA()()()()()),2&d&&(t.xp6(2),t.ekj("disabled",1===m.currentPage),t.xp6(4),t.Q6J("ngForOf",t.DdM(5,o).constructor(m.totalPages)),t.xp6(1),t.ekj("disabled",m.currentPage===m.totalPages))},dependencies:[e.ez,e.sg],styles:[".pagination[_ngcontent-%COMP%]   .page-item[_ngcontent-%COMP%]{cursor:pointer}"]})}return _})()}}]);